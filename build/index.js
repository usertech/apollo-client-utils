(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define('@usertech/apollo-client-utils',[],b):'object'==typeof exports?exports['@usertech/apollo-client-utils']=b():a['@usertech/apollo-client-utils']=b()})('undefined'==typeof self?this:self,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=2)}([function(a){a.exports=require('apollo-cache-inmemory')},function(a){a.exports=require('apollo-link')},function(a,b,c){a.exports=c(3)},function(a,b,c){'use strict';function d(a,b){var c={};for(var d in a)0<=b.indexOf(d)||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}Object.defineProperty(b,'__esModule',{value:!0});var e=c(4),f=c.n(e),g=c(0),h=c.n(g),i=c(1),j=c.n(i),k=c(5),l=c.n(k);var m=({link:a})=>new Promise(function(b,c){let d,e;return Promise.resolve(Object(i.makePromise)(Object(i.execute)(a,{query:l.a}))).then(function(a){try{return d=a,e={__schema:{types:d.data.__schema.types.filter((a)=>null!==a.possibleTypes)}},b(new g.IntrospectionFragmentMatcher({introspectionQueryResultData:e}))}catch(a){return c(a)}},c)}),n=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};var o=({link:a,useIntrospectionFragmentMatcher:b=!1})=>new Promise(function(c,d){function f(){return i=new g.InMemoryCache(h),c(new e.ApolloClient({link:a,cache:i}))}let h,i;return h={},b?Promise.resolve(m({link:a})).then(function(a){try{return h=n({},h,{fragmentMatcher:a}),f.call(this)}catch(a){return d(a)}}.bind(this),d):f.call(this)}),p=c(6),q=c.n(p),r=c(7),s=c.n(r);var t=(a)=>{var b=a.defaultOperationDelay;let c=b===void 0?500:b;var e=a.operationsDelays;let f=e===void 0?{IntrospectionFragmentMatcherQuery:1200}:e,g=a.mocks;var h=a.preserveResolvers;let j=d(a,['defaultOperationDelay','operationsDelays','mocks','preserveResolvers']);const k=Object(r.makeExecutableSchema)(j);Object(r.addMockFunctionsToSchema)({schema:k,mocks:g,preserveResolvers:!(h!==void 0)||h});const l=new p.SchemaLink({schema:k,context:({getContext:a})=>a()}),m=new i.ApolloLink((a,b)=>{const d=a.operationName,e=f[d],g='undefined'==typeof e?c:e;return new i.Observable((c)=>{let d;return setTimeout(()=>{d=b(a).subscribe({next:c.next.bind(c),error:c.error.bind(c),complete:c.complete.bind(c)})},g),()=>{d&&d.unsubscribe()}})});return i.ApolloLink.from([m,l])};c.d(b,'createDefaultApolloClient',function(){return o}),c.d(b,'createIntrospectionFragmentMatcher',function(){return m}),c.d(b,'createMockLink',function(){return t})},function(a){a.exports=require('apollo-client')},function(a){function b(a,c){if('FragmentSpread'===a.kind)c.add(a.name.value);else if('VariableDefinition'===a.kind){var d=a.type;'NamedType'===d.kind&&c.add(d.name.value)}a.selectionSet&&a.selectionSet.selections.forEach(function(a){b(a,c)}),a.variableDefinitions&&a.variableDefinitions.forEach(function(a){b(a,c)}),a.definitions&&a.definitions.forEach(function(a){b(a,c)})}function c(a,b){for(var c,d=0;d<a.definitions.length;d++)if(c=a.definitions[d],c.name&&c.name.value==b)return c}var d={kind:'Document',definitions:[{kind:'OperationDefinition',operation:'query',name:{kind:'Name',value:'IntrospectionFragmentMatcherQuery'},variableDefinitions:[],directives:[],selectionSet:{kind:'SelectionSet',selections:[{kind:'Field',name:{kind:'Name',value:'__schema'},arguments:[],directives:[],selectionSet:{kind:'SelectionSet',selections:[{kind:'Field',name:{kind:'Name',value:'types'},arguments:[],directives:[],selectionSet:{kind:'SelectionSet',selections:[{kind:'Field',name:{kind:'Name',value:'kind'},arguments:[],directives:[]},{kind:'Field',name:{kind:'Name',value:'name'},arguments:[],directives:[]},{kind:'Field',name:{kind:'Name',value:'possibleTypes'},arguments:[],directives:[],selectionSet:{kind:'SelectionSet',selections:[{kind:'Field',name:{kind:'Name',value:'name'},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:122}};d.loc.source={body:'query IntrospectionFragmentMatcherQuery {\n\t__schema {\n\t\ttypes {\n\t\t\tkind\n\t\t\tname\n\t\t\tpossibleTypes {\n\t\t\t\tname\n\t\t\t}\n\t\t}\n\t}\n}\n',name:'GraphQL request',locationOffset:{line:1,column:1}};var e={},f={};(function(){d.definitions.forEach(function(a){if(a.name){var c=new Set;b(a,c),f[a.name.value]=c}})})(),a.exports=d,a.exports.IntrospectionFragmentMatcherQuery=function(a,b){var d={kind:a.kind,definitions:[c(a,b)]};a.hasOwnProperty('loc')&&(d.loc=a.loc);for(var e,g=f[b]||new Set,h=new Set,i=new Set(g);0<i.size;)e=i,i=new Set,e.forEach(function(a){if(!h.has(a)){h.add(a);var b=f[a]||new Set;b.forEach(function(a){i.add(a)})}});return h.forEach(function(b){var e=c(a,b);e&&d.definitions.push(e)}),d}(d,'IntrospectionFragmentMatcherQuery')},function(a){a.exports=require('apollo-link-schema')},function(a){a.exports=require('graphql-tools')}])});
//# sourceMappingURL=index.js.map